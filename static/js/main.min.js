const accountDropdownIcon = document.getElementById("accountDropdownIcon");

try {
  accountDropdownIcon.addEventListener("click", () => {
    // dropdown menu toggle
    const accountDropdownMenu = document.getElementById("accountDropdownMenu");
    accountDropdownMenu.classList.toggle("hidden");

    // dropdown icon toggle
    const accountDropdownIconPath1 = document.getElementById(
      "accountDropdownIconPath1",
    );
    accountDropdownIconPath1.classList.toggle("stroke-text-light");
    accountDropdownIconPath1.classList.toggle("dark:stroke-text-dark");
    accountDropdownIconPath1.classList.toggle("stroke-primary-light");
    accountDropdownIconPath1.classList.toggle("dark:stroke-primary-dark");

    const accountDropdownIconPath2 = document.getElementById(
      "accountDropdownIconPath2",
    );
    accountDropdownIconPath2.classList.toggle("stroke-text-light");
    accountDropdownIconPath2.classList.toggle("dark:stroke-text-dark");
    accountDropdownIconPath2.classList.toggle("stroke-primary-light");
    accountDropdownIconPath2.classList.toggle("dark:stroke-primary-dark");
  });
} catch (error) {
  // console.error(error); // pass silently
}

// remove success message from html
function removeMessage() {
  const message = document.getElementById("message");
  if (message) {
    message.remove();
  }
}

try {
  window.addEventListener("load", () => {
    // wait before removing the message
    setTimeout(removeMessage, 2500);
  });
} catch (error) {
  // console.error(error); // pass silently
}

const lightTheme = document.getElementById("lightTheme");
const darkTheme = document.getElementById("darkTheme");
const systemTheme = document.getElementById("systemTheme");

// set local storage theme to light
function setLightTheme() {
  localStorage.theme = "light";
  document.documentElement.classList.remove("dark");
}

// set local storage theme to dark
function setDarkTheme() {
  localStorage.theme = "dark";
  document.documentElement.classList.add("dark");
}

// remove local storage theme and use system preferences
function setSystemTheme() {
  localStorage.removeItem("theme");
}

// update theme icons based on local storage settings
function updateThemeIcons() {
  try {
    if (localStorage.theme === "light") {
      // add active theme icon
      const lightThemeDropdownIcon = document.getElementById(
        "lightThemeDropdownIcon",
      );
      lightThemeDropdownIcon.classList.remove("hidden");

      // update active theme icon class values
      const lightThemeDropdownMenuIconPath1 = document.getElementById(
        "lightThemeDropdownMenuIconPath1",
      );
      lightThemeDropdownMenuIconPath1.classList.remove("stroke-text-light");
      lightThemeDropdownMenuIconPath1.classList.remove("dark:stroke-text-dark");
      lightThemeDropdownMenuIconPath1.classList.add("stroke-primary-light");
      lightThemeDropdownMenuIconPath1.classList.add("dark:stroke-primary-dark");

      const lightThemeDropdownMenuIconPath2 = document.getElementById(
        "lightThemeDropdownMenuIconPath2",
      );
      lightThemeDropdownMenuIconPath2.classList.remove("stroke-text-light");
      lightThemeDropdownMenuIconPath2.classList.remove("dark:stroke-text-dark");
      lightThemeDropdownMenuIconPath2.classList.add("stroke-primary-light");
      lightThemeDropdownMenuIconPath2.classList.add("dark:stroke-primary-dark");

      // remove inactive theme icons
      darkThemeDropdownIcon.classList.add("hidden");
      systemThemeDropdownIcon.classList.add("hidden");
    } else if (localStorage.theme === "dark") {
      // add active theme icon
      const darkThemeDropdownIcon = document.getElementById(
        "darkThemeDropdownIcon",
      );
      darkThemeDropdownIcon.classList.remove("hidden");

      // update active theme icon class values
      const darkThemeDropdownMenuIconPath1 = document.getElementById(
        "darkThemeDropdownMenuIconPath1",
      );
      darkThemeDropdownMenuIconPath1.classList.remove("fill-text-light");
      darkThemeDropdownMenuIconPath1.classList.remove("dark:fill-text-dark");
      darkThemeDropdownMenuIconPath1.classList.add("fill-primary-light");
      darkThemeDropdownMenuIconPath1.classList.add("dark:fill-primary-dark");

      const darkThemeDropdownMenuIconPath2 = document.getElementById(
        "darkThemeDropdownMenuIconPath2",
      );
      darkThemeDropdownMenuIconPath2.classList.remove("fill-text-light");
      darkThemeDropdownMenuIconPath2.classList.remove("dark:fill-text-dark");
      darkThemeDropdownMenuIconPath2.classList.add("fill-primary-light");
      darkThemeDropdownMenuIconPath2.classList.add("dark:fill-primary-dark");

      // remove inactive theme icons
      lightThemeDropdownIcon.classList.add("hidden");
      systemThemeDropdownIcon.classList.add("hidden");
    } else {
      // add active theme icon
      const systemThemeDropdownIcon = document.getElementById(
        "systemThemeDropdownIcon",
      );
      systemThemeDropdownIcon.classList.remove("hidden");

      // update active theme icon class values
      const systemThemeDropdownMenuIconPath1 = document.getElementById(
        "systemThemeDropdownMenuIconPath1",
      );
      systemThemeDropdownMenuIconPath1.classList.remove("stroke-text-light");
      systemThemeDropdownMenuIconPath1.classList.remove(
        "dark:stroke-text-dark",
      );
      systemThemeDropdownMenuIconPath1.classList.add("stroke-primary-light");
      systemThemeDropdownMenuIconPath1.classList.add(
        "dark:stroke-primary-dark",
      );

      const systemThemeDropdownMenuIconPath2 = document.getElementById(
        "systemThemeDropdownMenuIconPath2",
      );
      systemThemeDropdownMenuIconPath2.classList.remove("stroke-text-light");
      systemThemeDropdownMenuIconPath2.classList.remove(
        "dark:stroke-text-dark",
      );
      systemThemeDropdownMenuIconPath2.classList.add("stroke-primary-light");
      systemThemeDropdownMenuIconPath2.classList.add(
        "dark:stroke-primary-dark",
      );

      // remove inactive theme icons
      lightThemeDropdownIcon.classList.add("hidden");
      darkThemeDropdownIcon.classList.add("hidden");
    }
  } catch (error) {
    // console.error(error); // pass silently
  }
}

// activate the light theme
try {
  lightTheme.addEventListener("click", () => {
    setLightTheme();
    location.reload(); // force reload
  });
} catch (error) {
  // console.error(error); // pass silently
}

// activate the dark theme
try {
  darkTheme.addEventListener("click", () => {
    setDarkTheme();
    location.reload(); // force reload
  });
} catch (error) {
  // console.error(error); // pass silently
}

// activate the system preference theme
try {
  systemTheme.addEventListener("click", () => {
    setSystemTheme();
    location.reload(); // force reload
  });
} catch (error) {
  // console.error(error); // pass silently
}

// on load update theme icons
try {
  window.addEventListener("load", () => {
    updateThemeIcons();
  });
} catch (error) {
  // console.error(error); // pass silently
}

const themeDropdownIcon = document.getElementById("themeDropdownIcon");

try {
  themeDropdownIcon.addEventListener("click", () => {
    // dropdown menu toggle
    const themeDropdownMenu = document.getElementById("themeDropdownMenu");
    themeDropdownMenu.classList.toggle("hidden");

    // light theme icon toggle
    const lightThemeDropdownIconPath1 = document.getElementById(
      "lightThemeDropdownIconPath1",
    );
    lightThemeDropdownIconPath1.classList.toggle("stroke-text-light");
    lightThemeDropdownIconPath1.classList.toggle("dark:stroke-text-dark");
    lightThemeDropdownIconPath1.classList.toggle("stroke-primary-light");
    lightThemeDropdownIconPath1.classList.toggle("dark:stroke-primary-dark");

    const lightThemeDropdownIconPath2 = document.getElementById(
      "lightThemeDropdownIconPath2",
    );
    lightThemeDropdownIconPath2.classList.toggle("stroke-text-light");
    lightThemeDropdownIconPath2.classList.toggle("dark:stroke-text-dark");
    lightThemeDropdownIconPath2.classList.toggle("stroke-primary-light");
    lightThemeDropdownIconPath2.classList.toggle("dark:stroke-primary-dark");

    // dark theme icon toggle
    const darkThemeDropdownIconPath1 = document.getElementById(
      "darkThemeDropdownIconPath1",
    );
    darkThemeDropdownIconPath1.classList.toggle("fill-text-light");
    darkThemeDropdownIconPath1.classList.toggle("dark:fill-text-dark");
    darkThemeDropdownIconPath1.classList.toggle("fill-primary-light");
    darkThemeDropdownIconPath1.classList.toggle("dark:fill-primary-dark");

    const darkThemeDropdownIconPath2 = document.getElementById(
      "darkThemeDropdownIconPath2",
    );
    darkThemeDropdownIconPath2.classList.toggle("fill-text-light");
    darkThemeDropdownIconPath2.classList.toggle("dark:fill-text-dark");
    darkThemeDropdownIconPath2.classList.toggle("fill-primary-light");
    darkThemeDropdownIconPath2.classList.toggle("dark:fill-primary-dark");

    // system theme icon toggle
    const systemThemeDropdownIconPath1 = document.getElementById(
      "systemThemeDropdownIconPath1",
    );
    systemThemeDropdownIconPath1.classList.toggle("stroke-text-light");
    systemThemeDropdownIconPath1.classList.toggle("dark:stroke-text-dark");
    systemThemeDropdownIconPath1.classList.toggle("stroke-primary-light");
    systemThemeDropdownIconPath1.classList.toggle("dark:stroke-primary-dark");

    const systemThemeDropdownIconPath2 = document.getElementById(
      "systemThemeDropdownIconPath2",
    );
    systemThemeDropdownIconPath2.classList.toggle("stroke-text-light");
    systemThemeDropdownIconPath2.classList.toggle("dark:stroke-text-dark");
    systemThemeDropdownIconPath2.classList.toggle("stroke-primary-light");
    systemThemeDropdownIconPath2.classList.toggle("dark:stroke-primary-dark");
  });
} catch (error) {
  // console.error(error); // pass silently
}
